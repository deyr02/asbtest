(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{229:function(e,t,r){},358:function(e,t,r){"use strict";r.r(t),r.d(t,"history",(function(){return ae}));var n=r(0),a=r(40),c=r.n(a),i=(r(228),r(229),r(15)),s=r(373),d=r(24),o=r(382),l=r(378),u=r(372),j=r(2),b=Object(d.a)((function(e){var t=e.inverted,r=void 0===t||t,n=e.content,a=void 0===n?"Loading...":n;return Object(j.jsx)(l.a,{active:!0,inverted:r,children:Object(j.jsx)(u.a,{content:a})})})),h=r(48),m=r.n(h),x=r(104),O=r(10),f=r(11),C=r(13),p=r(116),g=r.n(p),v=r(205);g.a.defaults.baseURL="",g.a.interceptors.response.use(function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){var t=e.response,r=t.data,n=t.status,a=t.config;switch(n){case 400:if("get"===a.method&&r.errors.hasOwnProperty("id"),r.errors){var c=[];for(var i in r.errors)r.errors[i]&&c.push(r.errors[i]);throw c.flat()}v.a.error(r);break;case 404:ae.push("/not-found")}return Promise.reject(e)}));var N=function(e){return e.data},y=function(e){return g.a.get(e).then(N)},S=function(e,t){return g.a.post(e,t).then(N)},w={CreditCards:{list:function(){return y("/creditcard")},details:function(e){return y("/creditcard/".concat(e))},create:function(e){return S("/creditcard",e)}}},I=function e(t){Object(O.a)(this,e),Object.assign(this,t)},k=function(){function e(){var t=this;Object(O.a)(this,e),this.creditCardRegistry=[],this.selectedCreditCard=new I,this.loadingInitial=!1,this.userName="",this.setUserName=function(e){return t.userName=e},this.createCreditCard=function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.CreditCards.create(t);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),this.loadCards=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingInitial=!0,e.prev=1,e.next=4,w.CreditCards.list().then((function(e){Object(C.g)((function(){t.creditCardRegistry=e,t.loadingInitial=!1}))}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0),Object(C.g)((function(){return t.loadingInitial=!1}));case 10:case"end":return e.stop()}}),e,null,[[1,6]])}))),this.setLodingInitial=function(e){t.loadingInitial=e},this.loadSelectedCreditCard=function(){var e=Object(x.a)(m.a.mark((function e(r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingInitial=!0,t.selectedCreditCard=void 0,e.prev=2,e.next=5,w.CreditCards.details(r).then((function(e){Object(C.g)((function(){t.selectedCreditCard=e,t.loadingInitial=!1}))}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),Object(C.g)((function(){return t.loadingInitial=!1})),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),this.setCreditCard=function(e){t.creditCardRegistry.push(e)},Object(C.d)(this)}return Object(f.a)(e,[{key:"getCreditCardRegistry",get:function(){return this.creditCardRegistry}},{key:"getSelectedCreditCard",get:function(){return this.selectedCreditCard}}]),e}(),R={navStore:new(function(){function e(){var t=this;Object(O.a)(this,e),this.isMenuVisiable=!1,this.navTitle="Register Card Form",this.toggleMenu=function(e){Object(C.g)((function(){t.setIsVisible(),t.setTittle(e)}))},Object(C.d)(this)}return Object(f.a)(e,[{key:"setIsVisible",value:function(){this.isMenuVisiable=!this.isMenuVisiable}},{key:"setTittle",value:function(e){this.navTitle=e}}]),e}()),creditCardStore:new k},V=Object(n.createContext)(R);function M(){return Object(n.useContext)(V)}var F=r(27),T=r(23),P=r(70),L=r(114),E=r(55);function Y(){var e=Object(i.f)(),t=E.b({cardNumber:E.a().required("Please Input Card Number").typeError("Card Number must be a number")});return Object(j.jsx)(F.d,{initialValues:{cardNumber:""},validationSchema:t,onSubmit:function(t){e.push("/carddetails/".concat(t.cardNumber))},children:function(e){var t=e.handleSubmit;e.isSubmitting,e.isValid,e.dirty;return Object(j.jsxs)(F.c,{onSubmit:t,autoComplete:"off",children:[Object(j.jsxs)(T.a,{className:"search-box",children:[Object(j.jsx)(F.b,{name:"cardNumber",className:"search-input",placeholder:"Search By CardNumber.."}),Object(j.jsx)(P.a,{className:"search-box-icon",name:"search",circular:!0,link:!0,onClick:t,type:"submit"})]}),Object(j.jsx)(F.a,{name:"cardNumber",render:function(e){return Object(j.jsx)(L.a,{basic:!0,color:"red",content:e})}})]})}})}var D=r(28),q=r(376),z=r(380),A=Object(d.a)((function(){var e=M().creditCardStore;return Object(j.jsx)(q.a,{divided:!0,animated:!0,verticalAlign:"middle",children:e.getCreditCardRegistry.map((function(e){return Object(j.jsxs)(q.a.Item,{className:"card-item",children:[Object(j.jsx)(q.a.Content,{floated:"right",children:Object(j.jsx)(z.a,{className:"view-button",as:D.b,to:"/carddetails/".concat(e.cardNumber),children:"View"})}),Object(j.jsx)(q.a.Icon,{name:"credit card",className:"credit-card-icon",size:"huge",verticalAlign:"middle"}),Object(j.jsxs)(q.a.Content,{children:[Object(j.jsxs)(q.a.Content,{className:"card-info",as:"a",children:["CardNumber: ",e.cardNumber]}),Object(j.jsxs)(q.a.Description,{className:"card-info",as:"a",children:["Name: ",e.name]})]})]},e.id)}))})})),B=Object(d.a)((function(){var e=M(),t=e.creditCardStore,r=e.navStore;return Object(n.useEffect)((function(){t.loadCards(),r.setTittle("Credit Card List")}),[t,r]),Object(j.jsx)(j.Fragment,{children:t.loadingInitial?Object(j.jsx)(b,{}):Object(j.jsxs)(o.a,{children:[Object(j.jsx)(Y,{}),Object(j.jsx)(A,{})]})})})),U=r(383),H=r(377);function J(){return Object(j.jsxs)(o.a,{placeholder:!0,children:[Object(j.jsxs)(U.a,{icon:!0,children:[Object(j.jsx)(P.a,{name:"search"}),"Oops - we've looked everywhere and could not find this."]}),Object(j.jsx)(o.a.Inline,{children:Object(j.jsx)(z.a,{as:D.b,to:"/list",secondary:!0,children:"Return to Card List"})})]})}var W=Object(d.a)((function(){var e,t,r,a,c,s=M(),d=s.creditCardStore,l=s.navStore,u=Object(i.g)().cardnumber;return Object(n.useEffect)((function(){d.loadSelectedCreditCard(u),l.setTittle("Card-detatils")}),[d,l,u]),Object(j.jsx)(j.Fragment,{children:d.loadingInitial?Object(j.jsx)(b,{}):void 0===(null===(e=d.getSelectedCreditCard)||void 0===e?void 0:e.id)?Object(j.jsx)(J,{}):Object(j.jsxs)(o.a,{clearing:!0,children:[Object(j.jsxs)(U.a,{className:"detail-header",textAlign:"center",size:"huge",dividing:!0,children:[" ",Object(j.jsx)(P.a,{name:"credit card"})," Card Detils"]}),Object(j.jsxs)(H.a,{celled:!0,inverted:!0,striped:!0,selectable:!0,children:[Object(j.jsx)(H.a.Header,{children:Object(j.jsx)(H.a.Row,{children:Object(j.jsx)(H.a.HeaderCell,{textAlign:"center",colSpan:"2",children:"Credentials"})})}),Object(j.jsxs)(H.a.Body,{children:[Object(j.jsxs)(H.a.Row,{children:[Object(j.jsx)(H.a.Cell,{collapsing:!0,children:"Card Number"}),Object(j.jsx)(H.a.Cell,{children:null===(t=d.getSelectedCreditCard)||void 0===t?void 0:t.cardNumber})]}),Object(j.jsxs)(H.a.Row,{children:[Object(j.jsx)(H.a.Cell,{collapsing:!0,children:"Name on Card"}),Object(j.jsx)(H.a.Cell,{children:null===(r=d.getSelectedCreditCard)||void 0===r?void 0:r.name})]}),Object(j.jsxs)(H.a.Row,{children:[Object(j.jsx)(H.a.Cell,{collapsing:!0,children:"CVC"}),Object(j.jsx)(H.a.Cell,{children:null===(a=d.getSelectedCreditCard)||void 0===a?void 0:a.cvc})]}),Object(j.jsxs)(H.a.Row,{children:[Object(j.jsx)(H.a.Cell,{collapsing:!0,children:"Expiry"}),Object(j.jsx)(H.a.Cell,{children:null===(c=d.getSelectedCreditCard)||void 0===c?void 0:c.expiry})]})]})]}),Object(j.jsx)(z.a,{as:D.b,to:"/list",content:"Back to Card List",secondary:!0,floated:"right"})]})})})),$=r(374),G=r(379),K=Object(d.a)((function(){var e=M().creditCardStore,t=Object(i.f)(),r=void 0,n=E.b({name:E.c().max(50,"Name should be below 50 characters.").required("Please input the Name on Card"),cardNumber:E.a().typeError("Card Number must be a number").required("Please input card Number."),cvc:E.a().typeError("CVC must be a number").required("Please Input CVC number."),expiry:E.c().required("Please input the expiry date.").matches(/^(0?[1-9]|1[012])\/([2-9][0-9)]{3})$/,"Please input expiry date as MM/YYYY format")});return Object(j.jsx)(o.a,{clearing:!0,children:Object(j.jsx)(F.d,{validationSchema:n,enableReinitialize:!0,initialValues:{id:"",name:"",cardNumber:"",cvc:"",expiry:""},validateOnChange:!0,onSubmit:function(n,a){var c=n.expiry.split("/");n.expiry=new Date(c[0]+"/28/"+c[1]).toDateString(),n.id=Object(G.a)(),console.log(n),e.createCreditCard({id:n.id,name:n.name,cardNumber:parseInt(n.cardNumber),cvc:parseInt(n.cvc),expiry:new Date(n.expiry)}).then((function(){r=setTimeout((function(){a.setSubmitting(!1),a.resetForm(),t.push("/carddetails/".concat(n.cardNumber))}),5e3)})).catch((function(e){n.expiry=c[0]+"/"+c[1],a.setErrors({cardNumber:e.response.data}),a.setSubmitting(!1),clearTimeout(r)}))},children:function(t){var r=t.handleSubmit,n=t.isValid,a=t.isSubmitting,c=(t.errors,t.dirty);return Object(j.jsxs)($.a,{onChange:function(t){return"name"===t.target.name?e.setUserName(t.target.value):void 0},className:"ui form",onSubmit:r,autoComplete:"off",children:[Object(j.jsxs)(T.a,{children:[Object(j.jsx)(F.b,{placeholder:"Name on Card",name:"name"}),Object(j.jsx)(F.a,{name:"name",render:function(e){return Object(j.jsx)(L.a,{basic:!0,color:"red",content:e})}})]}),Object(j.jsxs)(T.a,{children:[Object(j.jsx)(F.b,{placeholder:"Card Number",name:"cardNumber"}),Object(j.jsx)(F.a,{name:"cardNumber",render:function(e){return Object(j.jsx)(L.a,{basic:!0,color:"red",content:e})}})]}),Object(j.jsxs)("div",{className:"form-seperator",children:[Object(j.jsxs)(T.a,{children:[Object(j.jsx)(F.b,{placeholder:"CVC",name:"cvc"}),Object(j.jsx)(F.a,{name:"cvc",render:function(e){return Object(j.jsx)(L.a,{basic:!0,color:"red",content:e})}})]}),Object(j.jsxs)(T.a,{children:[Object(j.jsx)(F.b,{placeholder:"Expiry (MM/YYYY)",name:"expiry"}),Object(j.jsx)(F.a,{name:"expiry",render:function(e){return Object(j.jsx)(L.a,{basic:!0,color:"red",content:e})}})]})]}),Object(j.jsx)(z.a,{disabled:a||!c||!n,loading:a,floated:"right",positive:!0,type:"submit",content:"Submit"})]})}})})})),Q=Object(d.a)((function(e){e.FirstName;var t=M().creditCardStore;return Object(j.jsxs)(U.a,{size:"huge",as:"h2",textAlign:"center",children:["Welcome! ",t.userName.length>15?t.userName.substring(0,15)+".....":t.userName]})}));function X(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Q,{FirstName:"Rajib"}),Object(j.jsx)(K,{})]})}var Z=r(375),_=Object(d.a)((function(){var e=M().navStore;return Object(j.jsxs)(q.a,{size:"large",link:!0,children:[Object(j.jsx)(q.a.Item,{as:D.b,to:"/",onClick:function(){return e.toggleMenu("RegisterCardForm")},active:!0,children:"Register Card"}),Object(j.jsx)(q.a.Item,{as:D.b,to:"/list",onClick:function(){return e.toggleMenu("Credit Card List")},children:"Credit Card List"})]})})),ee=Object(d.a)((function(){var e=M().navStore;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Z.a,{fixed:"top",floated:!0,children:Object(j.jsxs)(s.a,{children:[!e.isMenuVisiable&&Object(j.jsxs)(Z.a.Item,{as:"h2",children:[Object(j.jsx)("i",{onClick:function(){return e.toggleMenu("Menu")},className:"bars icon"}),Object(j.jsxs)("span",{className:"center-text",children:[" ",e.navTitle]})]}),e.isMenuVisiable&&Object(j.jsxs)(Z.a.Item,{as:"h2",children:[Object(j.jsx)("i",{onClick:function(){return e.toggleMenu("Register Card Form")},className:"arrow left icon"}),Object(j.jsx)("span",{className:"center-text",children:e.navTitle})]})]})}),e.isMenuVisiable&&Object(j.jsx)(s.a,{className:"menu-options",children:Object(j.jsx)(_,{})})]})}));var te=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ee,{}),Object(j.jsxs)(s.a,{className:"main-container",children:[Object(j.jsx)(i.a,{exact:!0,path:"/",component:X}),Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{exact:!0,path:"/list",component:B}),Object(j.jsx)(i.a,{exact:!0,path:"/carddetails/:cardnumber",component:W}),Object(j.jsx)(i.a,{exact:!0,path:"/not-found",component:J})]})]})]})},re=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,384)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),n(e),a(e),c(e),i(e)}))},ne=r(32),ae=Object(ne.a)();c.a.render(Object(j.jsx)(V.Provider,{value:R,children:Object(j.jsx)(D.a,{children:Object(j.jsx)(te,{})})}),document.getElementById("root")),re()}},[[358,1,2]]]);
//# sourceMappingURL=main.fbab22c3.chunk.js.map